<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SIP Calculator with AI Suggestions</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                line-height: 1.6;
                color: #333;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                background-color: #f4f4f4;
            }
            h1 {
                text-align: center;
                color: #2c3e50;
            }
            .calculator {
                background-color: #fff;
                border-radius: 8px;
                padding: 20px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
            label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }
            input[type="number"] {
                width: 100%;
                padding: 8px;
                margin-bottom: 15px;
                border: 1px solid #ddd;
                border-radius: 4px;
            }
            button {
                display: block;
                width: 100%;
                padding: 10px;
                background-color: #3498db;
                color: #fff;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 16px;
            }
            button:hover {
                background-color: #2980b9;
            }
            #result,
            #aiSuggestion {
                margin-top: 20px;
                padding: 15px;
                background-color: #e8f4fd;
                border-radius: 4px;
            }
            #aiSuggestion {
                background-color: #e8fdea;
            }
        </style>
    </head>

    <body>
        <h1>SIP Calculator with AI Suggestions</h1>
        <div class="calculator">
            <label for="monthlyInvestment">Monthly Investment (₹):</label>
            <input
                type="number"
                id="monthlyInvestment"
                min="0"
                step="100"
                value="5000"
            />

            <label for="annualReturn">Expected Annual Return (%):</label>
            <input
                type="number"
                id="annualReturn"
                min="0"
                max="100"
                step="0.1"
                value="12"
            />

            <label for="timePeriod">Time Period (Years):</label>
            <input
                type="number"
                id="timePeriod"
                min="1"
                max="50"
                step="1"
                value="10"
            />

            <button onclick="calculateSIP()">Calculate</button>

            <div id="result"></div>
            <div id="aiSuggestion"></div>
        </div>

        <script>
            async function calculateSIP() {
                const monthlyInvestment = parseFloat(
                    document.getElementById("monthlyInvestment").value,
                );
                const annualReturn = parseFloat(
                    document.getElementById("annualReturn").value,
                );
                const timePeriod = parseFloat(
                    document.getElementById("timePeriod").value,
                );

                const monthlyRate = annualReturn / 12 / 100;
                const months = timePeriod * 12;
                const totalInvestment = monthlyInvestment * months;

                const futureValue =
                    monthlyInvestment *
                    ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate) *
                    (1 + monthlyRate);
                const totalReturns = futureValue - totalInvestment;

                const resultHTML = `
                <h3>SIP Calculation Results:</h3>
                <p>Total Investment: ₹${totalInvestment.toFixed(2)}</p>
                <p>Total Returns: ₹${totalReturns.toFixed(2)}</p>
                <p>Future Value: ₹${futureValue.toFixed(2)}</p>
            `;

                document.getElementById("result").innerHTML = resultHTML;

                // Get AI suggestion
                const suggestion = await getAISuggestion(
                    monthlyInvestment,
                    annualReturn,
                    timePeriod,
                    futureValue,
                );
                document.getElementById("aiSuggestion").innerHTML =
                    `<h3>AI Suggestion:</h3><p>${suggestion}</p>`;
            }

            async function getAISuggestion(
                monthlyInvestment,
                annualReturn,
                timePeriod,
                futureValue,
            ) {
                const prompt = `As a financial advisor, provide a brief suggestion for a SIP investment with the following details:
            Monthly Investment: ₹${monthlyInvestment}
            Expected Annual Return: ${annualReturn}%
            Time Period: ${timePeriod} years
            Future Value: ₹${futureValue.toFixed(2)}
            Provide a concise recommendation in 2-3 sentences.`;

                try {
                    const response = await fetch(
                        "https://api.openai.com/v1/engines/text-davinci-002/completions",
                        {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                                Authorization: "Bearer YOUR_OPENAI_API_KEY",
                            },
                            body: JSON.stringify({
                                prompt: prompt,
                                max_tokens: 100,
                                n: 1,
                                stop: null,
                                temperature: 0.7,
                            }),
                        },
                    );

                    const data = await response.json();
                    return data.choices[0].text.trim();
                } catch (error) {
                    console.error("Error:", error);
                    return "Unable to get AI suggestion at this time.";
                }
            }
        </script>
    </body>
</html>
